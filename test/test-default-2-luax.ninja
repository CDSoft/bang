# Ninja file generated by bang (https://codeberg.org/cdsoft/bang)
# .build/bang -q test/test-default-2.lua -o .build/test/luax/test-default-2.ninja

# Targets:
#   help       show this help message
#   all        Build all
#   clean      clean generated files
#   mrproper   clean generated files and more

builddir = .build
ninja_required_version = 1.11.1

$builddir = .build

rule cp
  command = cp $in $out

build bar: cp foo
build baz: cp foo
build all: phony bar baz

######################################################################
# Default target test
######################################################################

# custom default target => default shall build my_default

default my_default

######################################################################
# Clean
######################################################################

rule clean-_builddir
  description = CLEAN $builddir
  command = rm -rf $builddir/*

build clean-_builddir: clean-_builddir
build clean: phony clean-_builddir

######################################################################
# Clean (mrproper)
######################################################################

rule mrproper-_builddir
  description = CLEAN $builddir
  command = rm -rf $builddir/*

build mrproper-_builddir: mrproper-_builddir
build mrproper: phony clean mrproper-_builddir

######################################################################
# Help
######################################################################

rule help
  description = help
  command = echo "Targets:"; $
            echo "  help       show this help message"; $
            echo "  all        Build all"; $
            echo "  clean      clean generated files"; $
            echo "  mrproper   clean generated files and more"

build help: help

######################################################################
# Regenerate .build/test/luax/test-default-2.ninja when test/test-default-2.lua changes
######################################################################

rule bang
  command = .build/bang -q $in -o $out
  generator = true

build .build/test/luax/test-default-2.ninja: bang test/test-default-2.lua | .git/refs/tags
  pool = console
